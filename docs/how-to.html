<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 How to… | kableExtra Cookbook</title>
  <meta name="description" content="Chapter 4 How to… | kableExtra Cookbook" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 How to… | kableExtra Cookbook" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 How to… | kableExtra Cookbook" />
  
  
  

<meta name="author" content="Sharla Gelfand" />


<meta name="date" content="2020-04-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="the-basics.html"/>
<link rel="next" href="wild-caught-tables.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">kableExtra Cookbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="the-basics.html"><a href="the-basics.html"><i class="fa fa-check"></i><b>3</b> The basics</a><ul>
<li class="chapter" data-level="3.1" data-path="the-basics.html"><a href="the-basics.html#create-a-basic-table"><i class="fa fa-check"></i><b>3.1</b> Create a basic table</a><ul>
<li class="chapter" data-level="3.1.1" data-path="the-basics.html"><a href="the-basics.html#example-data"><i class="fa fa-check"></i><b>3.1.1</b> Example data</a></li>
<li class="chapter" data-level="3.1.2" data-path="the-basics.html"><a href="the-basics.html#creating-a-basic-table"><i class="fa fa-check"></i><b>3.1.2</b> Creating a basic table</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="the-basics.html"><a href="the-basics.html#change-column-names"><i class="fa fa-check"></i><b>3.2</b> Change column names</a><ul>
<li class="chapter" data-level="3.2.1" data-path="the-basics.html"><a href="the-basics.html#basics-of-changing-column-names"><i class="fa fa-check"></i><b>3.2.1</b> Basics of changing column names</a></li>
<li class="chapter" data-level="3.2.2" data-path="the-basics.html"><a href="the-basics.html#changing-formatting-in-column-names"><i class="fa fa-check"></i><b>3.2.2</b> Changing formatting in column names</a></li>
<li class="chapter" data-level="3.2.3" data-path="the-basics.html"><a href="the-basics.html#adding-footnotes-to-column-names"><i class="fa fa-check"></i><b>3.2.3</b> Adding footnotes to column names</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="the-basics.html"><a href="the-basics.html#change-the-column-alignment"><i class="fa fa-check"></i><b>3.3</b> Change the column alignment</a></li>
<li class="chapter" data-level="3.4" data-path="the-basics.html"><a href="the-basics.html#add-a-table-caption"><i class="fa fa-check"></i><b>3.4</b> Add a table caption</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="how-to.html"><a href="how-to.html"><i class="fa fa-check"></i><b>4</b> How to…</a><ul>
<li class="chapter" data-level="4.1" data-path="how-to.html"><a href="how-to.html#make-a-table-full-width"><i class="fa fa-check"></i><b>4.1</b> Make a table full width</a></li>
<li class="chapter" data-level="4.2" data-path="how-to.html"><a href="how-to.html#add-a-top-header"><i class="fa fa-check"></i><b>4.2</b> Add a top header</a></li>
<li class="chapter" data-level="4.3" data-path="how-to.html"><a href="how-to.html#bold-columns-or-rows"><i class="fa fa-check"></i><b>4.3</b> Bold columns or rows</a></li>
<li class="chapter" data-level="4.4" data-path="how-to.html"><a href="how-to.html#dynamically-make-changes"><i class="fa fa-check"></i><b>4.4</b> Dynamically make changes</a></li>
<li class="chapter" data-level="4.5" data-path="how-to.html"><a href="how-to.html#take-advantage-of-pdf-only-features"><i class="fa fa-check"></i><b>4.5</b> Take advantage of PDF-only features</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="wild-caught-tables.html"><a href="wild-caught-tables.html"><i class="fa fa-check"></i><b>5</b> Wild-caught Tables</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">kableExtra Cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="how-to" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> How to…</h1>
<div id="make-a-table-full-width" class="section level2">
<h2><span class="header-section-number">4.1</span> Make a table full width</h2>
</div>
<div id="add-a-top-header" class="section level2">
<h2><span class="header-section-number">4.2</span> Add a top header</h2>
</div>
<div id="bold-columns-or-rows" class="section level2">
<h2><span class="header-section-number">4.3</span> Bold columns or rows</h2>
</div>
<div id="dynamically-make-changes" class="section level2">
<h2><span class="header-section-number">4.4</span> Dynamically make changes</h2>
<p>You might want to make changes to your tables that depend on features of your data that aren’t known in advance or can’t be hardcoded.</p>
<p>Let’s look at the <code>comma_survey</code> data set, which polled Americans on the oxford comma and other grammatical concepts. In particular, we’ll look at the education of those who care about the debate of whether “data” is a singular or plural noun:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">library</span>(fivethirtyeight)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"></a>
<a class="sourceLine" id="cb21-4" data-line-number="4">data_noun &lt;-<span class="st"> </span>comma_survey <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(care_data)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="st">  </span><span class="kw">select</span>(education, care_data)</a>
<a class="sourceLine" id="cb21-7" data-line-number="7"></a>
<a class="sourceLine" id="cb21-8" data-line-number="8">data_noun</a></code></pre></div>
<pre><code>## # A tibble: 1,091 x 2
##    education                        care_data 
##    &lt;ord&gt;                            &lt;ord&gt;     
##  1 Bachelor degree                  Not much  
##  2 Graduate degree                  Not much  
##  3 &lt;NA&gt;                             Not at all
##  4 Less than high school degree     Some      
##  5 &lt;NA&gt;                             Not much  
##  6 Some college or Associate degree Some      
##  7 Some college or Associate degree Some      
##  8 Some college or Associate degree A lot     
##  9 Graduate degree                  Not much  
## 10 Bachelor degree                  Some      
## # … with 1,081 more rows</code></pre>
<p>We want to make a table of what percent, by education, answered each of “Not much”, “Not at all”, “Some”, and “A lot” to the question: “How much, if at all, do you care about the debate over the use of the word”data&quot; as a singular or plural noun?&quot;.</p>
<p>First, we need to do some wrangling to replace <code>NA</code> values of <code>Education</code> with “Education unknown”, and to calculate the percent of each response.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">library</span>(scales)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2"></a>
<a class="sourceLine" id="cb23-3" data-line-number="3">data_noun_percent &lt;-<span class="st"> </span>data_noun <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">education =</span> <span class="kw">fct_explicit_na</span>(education, <span class="dt">na_level =</span> <span class="st">&quot;Education unknown&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-5" data-line-number="5"><span class="st">  </span><span class="kw">group_by</span>(education, care_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb23-8" data-line-number="8">    <span class="dt">prop =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n),</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">    <span class="dt">percent =</span> <span class="kw">percent</span>(prop)</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-11" data-line-number="11"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-12" data-line-number="12"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>n)</a>
<a class="sourceLine" id="cb23-13" data-line-number="13"></a>
<a class="sourceLine" id="cb23-14" data-line-number="14">data_noun_percent</a></code></pre></div>
<pre><code>## # A tibble: 24 x 4
##    education                        care_data    prop percent
##    &lt;ord&gt;                            &lt;ord&gt;       &lt;dbl&gt; &lt;chr&gt;  
##  1 Less than high school degree     Not at all 0.273  27.3%  
##  2 Less than high school degree     Not much   0.455  45.5%  
##  3 Less than high school degree     Some       0.182  18.2%  
##  4 Less than high school degree     A lot      0.0909 9.1%   
##  5 High school degree               Not at all 0.28   28.0%  
##  6 High school degree               Not much   0.34   34.0%  
##  7 High school degree               Some       0.3    30.0%  
##  8 High school degree               A lot      0.08   8.0%   
##  9 Some college or Associate degree Not at all 0.2    20.0%  
## 10 Some college or Associate degree Not much   0.403  40.3%  
## # … with 14 more rows</code></pre>
<p>Then reshape the data:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">data_noun_percent_wide &lt;-<span class="st"> </span>data_noun_percent <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>prop) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="st">  </span><span class="kw">pivot_wider</span>(</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">    <span class="dt">names_from =</span> <span class="st">&quot;care_data&quot;</span>,</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">    <span class="dt">values_from =</span> <span class="st">&quot;percent&quot;</span></a>
<a class="sourceLine" id="cb25-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb25-7" data-line-number="7"></a>
<a class="sourceLine" id="cb25-8" data-line-number="8">data_noun_percent_wide</a></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   education                        `Not at all` `Not much` Some   `A lot`
##   &lt;ord&gt;                            &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  
## 1 Less than high school degree     27.3%        45.5%      18.2%  9.1%   
## 2 High school degree               28.0%        34.0%      30.0%  8.0%   
## 3 Some college or Associate degree 20.0%        40.3%      29.8%  9.8%   
## 4 Bachelor degree                  18.90%       35.47%     35.76% 9.88%  
## 5 Graduate degree                  13.0%        37.3%      31.9%  17.8%  
## 6 Education unknown                18%          31%        32%    18%</code></pre>
<p>Then, we can make a table. We’ll clean up the column names, make sure the education column is left aligned and the responses are right aligned, and add a top header with the question “How much, if at all, do you care about the debate over the use of the word ‘data’ as a singular or plural noun?” above the “Not at all”, “Not much”, “Some”, and “A lot” columns:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">library</span>(kableExtra)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"></a>
<a class="sourceLine" id="cb27-3" data-line-number="3">data_noun_percent_wide <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="st">  </span><span class="kw">kable</span>(</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">    <span class="dt">col.names =</span> <span class="kw">c</span>(<span class="st">&quot;Education&quot;</span>, <span class="st">&quot;Not at all&quot;</span>, <span class="st">&quot;Not much&quot;</span>, <span class="st">&quot;Some&quot;</span>, <span class="st">&quot;A lot&quot;</span>),</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">    <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;lrrrr&quot;</span>)</a>
<a class="sourceLine" id="cb27-7" data-line-number="7">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-8" data-line-number="8"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;How much, if at all, do you care about the debate over the use of the word &#39;data&#39; as a singular or plural noun?&quot;</span> =<span class="st"> </span><span class="dv">4</span>))</a></code></pre></div>
<table>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
How much, if at all, do you care about the debate over the use of the word ‘data’ as a singular or plural noun?
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Education
</th>
<th style="text-align:right;">
Not at all
</th>
<th style="text-align:right;">
Not much
</th>
<th style="text-align:right;">
Some
</th>
<th style="text-align:right;">
A lot
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Less than high school degree
</td>
<td style="text-align:right;">
27.3%
</td>
<td style="text-align:right;">
45.5%
</td>
<td style="text-align:right;">
18.2%
</td>
<td style="text-align:right;">
9.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
High school degree
</td>
<td style="text-align:right;">
28.0%
</td>
<td style="text-align:right;">
34.0%
</td>
<td style="text-align:right;">
30.0%
</td>
<td style="text-align:right;">
8.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
Some college or Associate degree
</td>
<td style="text-align:right;">
20.0%
</td>
<td style="text-align:right;">
40.3%
</td>
<td style="text-align:right;">
29.8%
</td>
<td style="text-align:right;">
9.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Bachelor degree
</td>
<td style="text-align:right;">
18.90%
</td>
<td style="text-align:right;">
35.47%
</td>
<td style="text-align:right;">
35.76%
</td>
<td style="text-align:right;">
9.88%
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduate degree
</td>
<td style="text-align:right;">
13.0%
</td>
<td style="text-align:right;">
37.3%
</td>
<td style="text-align:right;">
31.9%
</td>
<td style="text-align:right;">
17.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Education unknown
</td>
<td style="text-align:right;">
18%
</td>
<td style="text-align:right;">
31%
</td>
<td style="text-align:right;">
32%
</td>
<td style="text-align:right;">
18%
</td>
</tr>
</tbody>
</table>
<p>Doing this required us to hardcode in the question responses and the number of columns (4) corresponding to them (both for the header above, and for the column alignment). Our code is now fragile if this isn’t known in advance, or could change!</p>
<p>Instead, we can think about it this way: we know that the first column contains Education and the rest contain the answers. So, we can set the column names, alignment, and the header using attributes of <code>data_noun_percent_wide</code>.</p>
<p>For <code>col.names</code> and <code>align</code>, we can quickly use <code>names()</code> and <code>ncol()</code>, respectively:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">k &lt;-<span class="st"> </span>data_noun_percent_wide <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(</a>
<a class="sourceLine" id="cb28-3" data-line-number="3">    <span class="dt">col.names =</span> <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb28-4" data-line-number="4">      <span class="st">&quot;Education&quot;</span>,</a>
<a class="sourceLine" id="cb28-5" data-line-number="5">      <span class="kw">names</span>(data_noun_percent_wide)[<span class="op">-</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">    ),</a>
<a class="sourceLine" id="cb28-7" data-line-number="7">    <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(data_noun_percent_wide) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb28-8" data-line-number="8">  )</a>
<a class="sourceLine" id="cb28-9" data-line-number="9"></a>
<a class="sourceLine" id="cb28-10" data-line-number="10">k</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Education
</th>
<th style="text-align:right;">
Not at all
</th>
<th style="text-align:right;">
Not much
</th>
<th style="text-align:right;">
Some
</th>
<th style="text-align:right;">
A lot
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Less than high school degree
</td>
<td style="text-align:right;">
27.3%
</td>
<td style="text-align:right;">
45.5%
</td>
<td style="text-align:right;">
18.2%
</td>
<td style="text-align:right;">
9.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
High school degree
</td>
<td style="text-align:right;">
28.0%
</td>
<td style="text-align:right;">
34.0%
</td>
<td style="text-align:right;">
30.0%
</td>
<td style="text-align:right;">
8.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
Some college or Associate degree
</td>
<td style="text-align:right;">
20.0%
</td>
<td style="text-align:right;">
40.3%
</td>
<td style="text-align:right;">
29.8%
</td>
<td style="text-align:right;">
9.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Bachelor degree
</td>
<td style="text-align:right;">
18.90%
</td>
<td style="text-align:right;">
35.47%
</td>
<td style="text-align:right;">
35.76%
</td>
<td style="text-align:right;">
9.88%
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduate degree
</td>
<td style="text-align:right;">
13.0%
</td>
<td style="text-align:right;">
37.3%
</td>
<td style="text-align:right;">
31.9%
</td>
<td style="text-align:right;">
17.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Education unknown
</td>
<td style="text-align:right;">
18%
</td>
<td style="text-align:right;">
31%
</td>
<td style="text-align:right;">
32%
</td>
<td style="text-align:right;">
18%
</td>
</tr>
</tbody>
</table>
<p>And for the header, we can create a <em>named vector</em> with the number of columns each header spans (again, using <code>ncol()</code>):</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">k_header &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="kw">ncol</span>(data_noun_percent_wide) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="kw">names</span>(k_header) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;How much, if at all, do you care about the debate over the use of the word &#39;data&#39; as a singular or plural noun?&quot;</span>)</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"></a>
<a class="sourceLine" id="cb29-4" data-line-number="4">k <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-5" data-line-number="5"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> k_header)</a></code></pre></div>
<table>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
How much, if at all, do you care about the debate over the use of the word ‘data’ as a singular or plural noun?
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Education
</th>
<th style="text-align:right;">
Not at all
</th>
<th style="text-align:right;">
Not much
</th>
<th style="text-align:right;">
Some
</th>
<th style="text-align:right;">
A lot
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Less than high school degree
</td>
<td style="text-align:right;">
27.3%
</td>
<td style="text-align:right;">
45.5%
</td>
<td style="text-align:right;">
18.2%
</td>
<td style="text-align:right;">
9.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
High school degree
</td>
<td style="text-align:right;">
28.0%
</td>
<td style="text-align:right;">
34.0%
</td>
<td style="text-align:right;">
30.0%
</td>
<td style="text-align:right;">
8.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
Some college or Associate degree
</td>
<td style="text-align:right;">
20.0%
</td>
<td style="text-align:right;">
40.3%
</td>
<td style="text-align:right;">
29.8%
</td>
<td style="text-align:right;">
9.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Bachelor degree
</td>
<td style="text-align:right;">
18.90%
</td>
<td style="text-align:right;">
35.47%
</td>
<td style="text-align:right;">
35.76%
</td>
<td style="text-align:right;">
9.88%
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduate degree
</td>
<td style="text-align:right;">
13.0%
</td>
<td style="text-align:right;">
37.3%
</td>
<td style="text-align:right;">
31.9%
</td>
<td style="text-align:right;">
17.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Education unknown
</td>
<td style="text-align:right;">
18%
</td>
<td style="text-align:right;">
31%
</td>
<td style="text-align:right;">
32%
</td>
<td style="text-align:right;">
18%
</td>
</tr>
</tbody>
</table>
<p>Now our code is more robust and can easily adapt to changes in the data (e.g., if there were additional responses).</p>
<p>We might want to do other things, too, like bold the cell with the highest percent for each of the levels of Education.</p>
<p>To do this, we can use <code>cell_spec()</code> to set values of <code>percent</code> to bold if they are the highest value of <code>prop</code> (the unformatted <code>percent</code>) for their level of <code>education</code>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">data_noun_bold_highest_prop &lt;-<span class="st"> </span>data_noun_percent <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(education) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">highest_prop =</span> <span class="kw">max</span>(prop)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">percent =</span> <span class="kw">cell_spec</span>(percent, <span class="dt">format =</span> <span class="st">&quot;html&quot;</span>, <span class="dt">bold =</span> prop <span class="op">==</span><span class="st"> </span>highest_prop))</a>
<a class="sourceLine" id="cb30-5" data-line-number="5"></a>
<a class="sourceLine" id="cb30-6" data-line-number="6">data_noun_bold_highest_prop</a></code></pre></div>
<pre><code>## # A tibble: 24 x 5
## # Groups:   education [6]
##    education           care_data   prop percent                     highest_prop
##    &lt;ord&gt;               &lt;ord&gt;      &lt;dbl&gt; &lt;chr&gt;                              &lt;dbl&gt;
##  1 Less than high sch… Not at a… 0.273  &quot;&lt;span style=\&quot;     \&quot; &gt;27…        0.455
##  2 Less than high sch… Not much  0.455  &quot;&lt;span style=\&quot; font-weigh…        0.455
##  3 Less than high sch… Some      0.182  &quot;&lt;span style=\&quot;     \&quot; &gt;18…        0.455
##  4 Less than high sch… A lot     0.0909 &quot;&lt;span style=\&quot;     \&quot; &gt;9.…        0.455
##  5 High school degree  Not at a… 0.28   &quot;&lt;span style=\&quot;     \&quot; &gt;28…        0.34 
##  6 High school degree  Not much  0.34   &quot;&lt;span style=\&quot; font-weigh…        0.34 
##  7 High school degree  Some      0.3    &quot;&lt;span style=\&quot;     \&quot; &gt;30…        0.34 
##  8 High school degree  A lot     0.08   &quot;&lt;span style=\&quot;     \&quot; &gt;8.…        0.34 
##  9 Some college or As… Not at a… 0.2    &quot;&lt;span style=\&quot;     \&quot; &gt;20…        0.403
## 10 Some college or As… Not much  0.403  &quot;&lt;span style=\&quot; font-weigh…        0.403
## # … with 14 more rows</code></pre>
<p>This applies HTML formatting to <code>percent</code> (specifically, bold formatting to the highest value for each level of <code>education</code>) that will be picked up by kableExtra.</p>
<p>Then, we again reshape the data to a wide format and create a table. This time, we need to set <code>escape = FALSE</code> in <code>kable()</code> to let it know that there is HTML in the cells that should <em>not</em> be escaped (i.e., not treated as regular text):</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">data_noun_bold_highest_prop_wide &lt;-<span class="st"> </span>data_noun_bold_highest_prop <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>prop, <span class="op">-</span>highest_prop) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-3" data-line-number="3"><span class="st">  </span><span class="kw">pivot_wider</span>(</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">    <span class="dt">names_from =</span> <span class="st">&quot;care_data&quot;</span>,</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">    <span class="dt">values_from =</span> <span class="st">&quot;percent&quot;</span></a>
<a class="sourceLine" id="cb32-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb32-7" data-line-number="7"></a>
<a class="sourceLine" id="cb32-8" data-line-number="8">k_header &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="kw">ncol</span>(data_noun_bold_highest_prop_wide) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb32-9" data-line-number="9"><span class="kw">names</span>(k_header) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;How much, if at all, do you care about the debate over the use of the word &#39;data&#39; as a singular or plural noun?&quot;</span>)</a>
<a class="sourceLine" id="cb32-10" data-line-number="10"></a>
<a class="sourceLine" id="cb32-11" data-line-number="11">data_noun_bold_highest_prop_wide <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-12" data-line-number="12"><span class="st">  </span><span class="kw">kable</span>(<span class="st">&quot;html&quot;</span>,</a>
<a class="sourceLine" id="cb32-13" data-line-number="13">        <span class="dt">col.names =</span> <span class="kw">c</span>(<span class="st">&quot;Education&quot;</span>, <span class="kw">names</span>(data_noun_bold_highest_prop_wide)[<span class="op">-</span><span class="dv">1</span>]),</a>
<a class="sourceLine" id="cb32-14" data-line-number="14">        <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(data_noun_bold_highest_prop_wide) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)),</a>
<a class="sourceLine" id="cb32-15" data-line-number="15">        <span class="dt">escape =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb32-16" data-line-number="16">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-17" data-line-number="17"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> k_header)</a></code></pre></div>
<table>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
How much, if at all, do you care about the debate over the use of the word ‘data’ as a singular or plural noun?
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Education
</th>
<th style="text-align:right;">
Not at all
</th>
<th style="text-align:right;">
Not much
</th>
<th style="text-align:right;">
Some
</th>
<th style="text-align:right;">
A lot
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Less than high school degree
</td>
<td style="text-align:right;">
<span style="     ">27.3%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">45.5%</span>
</td>
<td style="text-align:right;">
<span style="     ">18.2%</span>
</td>
<td style="text-align:right;">
<span style="     ">9.1%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
High school degree
</td>
<td style="text-align:right;">
<span style="     ">28.0%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">34.0%</span>
</td>
<td style="text-align:right;">
<span style="     ">30.0%</span>
</td>
<td style="text-align:right;">
<span style="     ">8.0%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Some college or Associate degree
</td>
<td style="text-align:right;">
<span style="     ">20.0%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">40.3%</span>
</td>
<td style="text-align:right;">
<span style="     ">29.8%</span>
</td>
<td style="text-align:right;">
<span style="     ">9.8%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Bachelor degree
</td>
<td style="text-align:right;">
<span style="     ">18.90%</span>
</td>
<td style="text-align:right;">
<span style="     ">35.47%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">35.76%</span>
</td>
<td style="text-align:right;">
<span style="     ">9.88%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduate degree
</td>
<td style="text-align:right;">
<span style="     ">13.0%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">37.3%</span>
</td>
<td style="text-align:right;">
<span style="     ">31.9%</span>
</td>
<td style="text-align:right;">
<span style="     ">17.8%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Education unknown
</td>
<td style="text-align:right;">
<span style="     ">18%</span>
</td>
<td style="text-align:right;">
<span style="     ">31%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">32%</span>
</td>
<td style="text-align:right;">
<span style="     ">18%</span>
</td>
</tr>
</tbody>
</table>
<p>This way, we can apply formatting based on specific values of the data, which may change.</p>
</div>
<div id="take-advantage-of-pdf-only-features" class="section level2">
<h2><span class="header-section-number">4.5</span> Take advantage of PDF-only features</h2>
<p>Example code that will allow us to embed PDF-only table output. This
uses a couple of basic examples of doing this, with code from the <code>dslabs</code> package.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="kw">library</span>(dslabs)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="kw">data</span>(<span class="st">&quot;us_contagious_diseases&quot;</span>)</a>
<a class="sourceLine" id="cb33-4" data-line-number="4">top_<span class="dv">10</span>_data &lt;-<span class="st"> </span>us_contagious_diseases <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(disease <span class="op">==</span><span class="st"> &quot;Pertussis&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-6" data-line-number="6"><span class="st">  </span><span class="kw">group_by</span>(state) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-7" data-line-number="7"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total_count =</span> <span class="kw">sum</span>(count)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-8" data-line-number="8"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(total_count)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-9" data-line-number="9"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) </a></code></pre></div>
<p>Then, you can use the <code>kable</code> function to create a basic PDF table:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">top_<span class="dv">10</span>_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">format =</span> <span class="st">&quot;latex&quot;</span>) </a></code></pre></div>
<p>The <code>booktabs = TRUE</code> option, if you include it in the <code>kable</code> function call, will give
some cleaner default formatting for the table:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">top_<span class="dv">10</span>_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">format =</span> <span class="st">&quot;latex&quot;</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>) </a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="wild-caught-tables.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["kableExtra-cookbook.pdf", "kableExtra-cookbook.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
