<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 How to… | kableExtra Cookbook</title>
  <meta name="description" content="Chapter 5 How to… | kableExtra Cookbook" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 How to… | kableExtra Cookbook" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 How to… | kableExtra Cookbook" />
  
  
  

<meta name="author" content="Sharla Gelfand, Brooke Anderson, Jim Gruman" />


<meta name="date" content="2020-04-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidyverse-kableextra-pipelines.html"/>
<link rel="next" href="wild-caught-tables.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">kableExtra Cookbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="the-basics.html"><a href="the-basics.html"><i class="fa fa-check"></i><b>3</b> The basics</a><ul>
<li class="chapter" data-level="3.1" data-path="the-basics.html"><a href="the-basics.html#create-a-basic-table"><i class="fa fa-check"></i><b>3.1</b> Create a basic table</a><ul>
<li class="chapter" data-level="3.1.1" data-path="the-basics.html"><a href="the-basics.html#example-data"><i class="fa fa-check"></i><b>3.1.1</b> Example data</a></li>
<li class="chapter" data-level="3.1.2" data-path="the-basics.html"><a href="the-basics.html#creating-a-basic-table"><i class="fa fa-check"></i><b>3.1.2</b> Creating a basic table</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="the-basics.html"><a href="the-basics.html#change-column-names"><i class="fa fa-check"></i><b>3.2</b> Change column names</a><ul>
<li class="chapter" data-level="3.2.1" data-path="the-basics.html"><a href="the-basics.html#basics-of-changing-column-names"><i class="fa fa-check"></i><b>3.2.1</b> Basics of changing column names</a></li>
<li class="chapter" data-level="3.2.2" data-path="the-basics.html"><a href="the-basics.html#changing-formatting-in-column-names"><i class="fa fa-check"></i><b>3.2.2</b> Changing formatting in column names</a></li>
<li class="chapter" data-level="3.2.3" data-path="the-basics.html"><a href="the-basics.html#adding-footnotes-to-column-names"><i class="fa fa-check"></i><b>3.2.3</b> Adding footnotes to column names</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="the-basics.html"><a href="the-basics.html#change-the-column-alignment"><i class="fa fa-check"></i><b>3.3</b> Change the column alignment</a></li>
<li class="chapter" data-level="3.4" data-path="the-basics.html"><a href="the-basics.html#add-a-table-caption"><i class="fa fa-check"></i><b>3.4</b> Add a table caption</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidyverse-kableextra-pipelines.html"><a href="tidyverse-kableextra-pipelines.html"><i class="fa fa-check"></i><b>4</b> Tidyverse / kableExtra pipelines</a><ul>
<li class="chapter" data-level="4.1" data-path="tidyverse-kableextra-pipelines.html"><a href="tidyverse-kableextra-pipelines.html#example-data-1"><i class="fa fa-check"></i><b>4.1</b> Example data</a></li>
<li class="chapter" data-level="4.2" data-path="tidyverse-kableextra-pipelines.html"><a href="tidyverse-kableextra-pipelines.html#example-1"><i class="fa fa-check"></i><b>4.2</b> Example 1</a></li>
<li class="chapter" data-level="4.3" data-path="tidyverse-kableextra-pipelines.html"><a href="tidyverse-kableextra-pipelines.html#example-2"><i class="fa fa-check"></i><b>4.3</b> Example 2</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="how-to.html"><a href="how-to.html"><i class="fa fa-check"></i><b>5</b> How to…</a><ul>
<li class="chapter" data-level="5.1" data-path="how-to.html"><a href="how-to.html#make-a-table-full-width"><i class="fa fa-check"></i><b>5.1</b> Make a table full width</a></li>
<li class="chapter" data-level="5.2" data-path="how-to.html"><a href="how-to.html#add-a-top-header"><i class="fa fa-check"></i><b>5.2</b> Add a top header</a></li>
<li class="chapter" data-level="5.3" data-path="how-to.html"><a href="how-to.html#group-rows"><i class="fa fa-check"></i><b>5.3</b> Group rows</a></li>
<li class="chapter" data-level="5.4" data-path="how-to.html"><a href="how-to.html#bold-columns-or-rows"><i class="fa fa-check"></i><b>5.4</b> Bold columns or rows</a></li>
<li class="chapter" data-level="5.5" data-path="how-to.html"><a href="how-to.html#dynamically-make-changes"><i class="fa fa-check"></i><b>5.5</b> Dynamically make changes</a></li>
<li class="chapter" data-level="5.6" data-path="how-to.html"><a href="how-to.html#take-advantage-of-pdf-only-features"><i class="fa fa-check"></i><b>5.6</b> Take advantage of PDF-only features</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="wild-caught-tables.html"><a href="wild-caught-tables.html"><i class="fa fa-check"></i><b>6</b> Wild-caught Tables</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">kableExtra Cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="how-to" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> How to…</h1>
<div id="make-a-table-full-width" class="section level2">
<h2><span class="header-section-number">5.1</span> Make a table full width</h2>
</div>
<div id="add-a-top-header" class="section level2">
<h2><span class="header-section-number">5.2</span> Add a top header</h2>
<p>You can also add headers above certain column names, to help distinguish groupings.</p>
<p>For this section, we’ll use an example based on the “us_contagious_diseases” data
from the <code>dslabs</code> package. The following code will load that data and then create the
<code>pertussis_latest_years</code> dataframe from it:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">library</span>(dslabs)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="kw">data</span>(<span class="st">&quot;us_contagious_diseases&quot;</span>)</a>
<a class="sourceLine" id="cb27-4" data-line-number="4"></a>
<a class="sourceLine" id="cb27-5" data-line-number="5">pertussis_latest_years &lt;-<span class="st"> </span>us_contagious_diseases <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-6" data-line-number="6"><span class="st">  </span><span class="co"># Limit to states in the region of interest</span></a>
<a class="sourceLine" id="cb27-7" data-line-number="7"><span class="st">  </span><span class="kw">filter</span>(state <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;California&quot;</span>, <span class="st">&quot;Oregon&quot;</span>, <span class="st">&quot;Washington&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-8" data-line-number="8"><span class="st">  </span><span class="co"># Limit to the disease of interest</span></a>
<a class="sourceLine" id="cb27-9" data-line-number="9"><span class="st">  </span><span class="kw">filter</span>(disease <span class="op">==</span><span class="st"> &quot;Pertussis&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-10" data-line-number="10"><span class="st">  </span><span class="co"># Limit to the latest five years reported for each state</span></a>
<a class="sourceLine" id="cb27-11" data-line-number="11"><span class="st">  </span><span class="kw">group_by</span>(state) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-12" data-line-number="12"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(year)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-13" data-line-number="13"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-14" data-line-number="14"><span class="st">  </span><span class="co"># Calculate the average weekly count from the total yearly count and</span></a>
<a class="sourceLine" id="cb27-15" data-line-number="15"><span class="st">  </span><span class="co"># the number of weeks reporting (should check data---does an </span></a>
<a class="sourceLine" id="cb27-16" data-line-number="16"><span class="st">  </span><span class="co"># &#39;unreported&#39; week mean there were no cases that week?)</span></a>
<a class="sourceLine" id="cb27-17" data-line-number="17"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ave_weekly_count =</span> count <span class="op">/</span><span class="st"> </span>weeks_reporting) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-18" data-line-number="18"><span class="st">  </span><span class="co"># Limit to only the data to show in the table</span></a>
<a class="sourceLine" id="cb27-19" data-line-number="19"><span class="st">  </span><span class="kw">select</span>(state, year, ave_weekly_count) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-20" data-line-number="20"><span class="st">  </span><span class="co"># Reorder by year so that the earliest year comes first</span></a>
<a class="sourceLine" id="cb27-21" data-line-number="21"><span class="st">  </span><span class="kw">arrange</span>(year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-22" data-line-number="22"><span class="st">  </span><span class="co"># &quot;Widen&quot; the data for a nicer table</span></a>
<a class="sourceLine" id="cb27-23" data-line-number="23"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year, <span class="dt">values_from =</span> ave_weekly_count)</a></code></pre></div>
<p>This dataframe gives average weekly counts of
pertussis in three west coast states over the last five years of reporting. The
code used to create this dataset from the original data is discussed in a previous
section of this book.</p>
<p>Previously, we created this table from the data:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb28-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-34">Table 5.1: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>We might want to add a top header over the five columns that show years, to distinguish
that those are all similar types of columns. With <code>kableExtra</code>, this can be added with
the function <code>add_header_above</code>. The convention for this argument is to include a value
for <code>header</code> that’s a vector; this vector will give the names to use for top-level headers
as well as the number of columns they should span. In this case, we’d like to not add
anything over the “state” column, so we can use the marker <code>&quot; &quot;</code> to indicate that
no top-level header should be added. For all the other columns, we’ll add “Year”.
Since we only have one column (the first) that will lack a top-level header, and
then five (the years) that will all get the same header (“Year”), we can express
that in the “header” argument as <code>c(&quot; &quot; = 1, &quot;Year&quot; = 5)</code>. In other words, don’t
have a top-level header for one column, and then have one named “Year” that spans
five columns.</p>
<p>Here’s the result:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb29-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Year&quot;</span> =<span class="st"> </span><span class="dv">5</span>))</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-35">Table 5.2: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Year
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>In the <code>add_header_above</code> call, you’ll need to make sure that you specify values
for all the columns in your table. In other words, all the numbers in that argument
should add up to the number of columns that you have. In this case, we have six
columns in the table (the “state” column plus each of the yearly ones). Since
5 + 1 = 6, we’re good here.</p>
<p>Here’s another example, where separate headers are added for the first two then the
next three years:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;First two years&quot;</span> =<span class="st"> </span><span class="dv">2</span>, <span class="st">&quot;Next three years&quot;</span> =<span class="st"> </span><span class="dv">3</span>))</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-36">Table 5.3: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
First two years
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Next three years
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>Again, you can see that 1 + 2 + 3 = 6, so we’ve covered all of our columns in the
table.</p>
<p>If you want, you can even add headers on top of headers. Just keep adding calls to
<code>add_header_above</code>, going from the header you want closest to the column names to the
top-most one you want. For example, you could add a header above both of the two
top-level headers in the previous example with:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb31-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;First two years&quot;</span> =<span class="st"> </span><span class="dv">2</span>, <span class="st">&quot;Next three years&quot;</span> =<span class="st"> </span><span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Year&quot;</span> =<span class="st"> </span><span class="dv">5</span>))</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-37">Table 5.4: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Year
</div>
</th>
</tr>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
First two years
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Next three years
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>You can change the formatting of the header in the <code>add_header_above</code> call, as well.
For example, you can change it to be in italics with <code>italic = TRUE</code>:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb32-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Year&quot;</span> =<span class="st"> </span><span class="dv">5</span>), </a>
<a class="sourceLine" id="cb32-5" data-line-number="5">                   <span class="dt">italic =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-38">Table 5.5: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-style: italic; " colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Year
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>You can change the alignment, too. The default is to be centered over the columns that
it spans, but you can change that with <code>align</code>. For example, <code>align = &quot;l&quot;</code> would change
it to be left-aligned:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb33-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Year&quot;</span> =<span class="st"> </span><span class="dv">5</span>), </a>
<a class="sourceLine" id="cb33-5" data-line-number="5">                   <span class="dt">align =</span> <span class="st">&quot;l&quot;</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-39">Table 5.6: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: left; " colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Year
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>You can change the color of both the text and the background color for this new
header section with teh <code>color</code> and <code>background</code> arguments, respectively:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Year&quot;</span> =<span class="st"> </span><span class="dv">5</span>), </a>
<a class="sourceLine" id="cb34-5" data-line-number="5">                   <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>,</a>
<a class="sourceLine" id="cb34-6" data-line-number="6">                   <span class="dt">background =</span> <span class="st">&quot;lightsalmon&quot;</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-40">Table 5.7: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: white !important;padding-right: 4px; padding-left: 4px; background-color: lightsalmon !important;" colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Year
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>You can change the angle of the text for the new header with <code>angle</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb35-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Year&quot;</span> =<span class="st"> </span><span class="dv">5</span>), </a>
<a class="sourceLine" id="cb35-5" data-line-number="5">                   <span class="dt">angle =</span> <span class="dv">-45</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-41">Table 5.8: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
<span style="-webkit-transform: rotate(-45deg); -moz-transform: rotate(-45deg); -ms-transform: rotate(-45deg); -o-transform: rotate(-45deg); transform: rotate(-45deg); display: inline-block; ">Year</span>
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>If you’d like the text for a column to have a line break, you can include the
code for a new line (“”) inside the column name:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb36-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Year</span><span class="ch">\n</span><span class="st">(Georgian calendar)&quot;</span> =<span class="st"> </span><span class="dv">5</span>))</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-42">Table 5.9: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="5">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Year<br>(Georgian calendar)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>If you have more than one top-level header, you may want to change the amount
of separation between each group. You can do that with the <code>line_sep</code> argument.
Here is the example table where separate top-level headers are added for the
first two years versus the last three from earlier:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb37-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;First two years&quot;</span> =<span class="st"> </span><span class="dv">2</span>, <span class="st">&quot;Next three years&quot;</span> =<span class="st"> </span><span class="dv">3</span>))</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-43">Table 5.10: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
First two years
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Next three years
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>If you set <code>line_sep = 0</code>, then you’ll see that there’s no space between the two
header sections, so the line under the two headers runs together into one line:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb38-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;First two years&quot;</span> =<span class="st"> </span><span class="dv">2</span>, <span class="st">&quot;Next three years&quot;</span> =<span class="st"> </span><span class="dv">3</span>),</a>
<a class="sourceLine" id="cb38-5" data-line-number="5">                   <span class="dt">line_sep =</span> <span class="dv">0</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-44">Table 5.11: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:0px;padding-right:0px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
First two years
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:0px;padding-right:0px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Next three years
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
<p>On the other hand, if you set <code>line_sep</code> to a value higher than it’s default of 3,
you can increase the separation in the headers:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">pertussis_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb39-3" data-line-number="3">        <span class="dt">caption =</span> <span class="st">&quot;Average weekly number of cases of pertussis in west coast states for the last five years of reporting.&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;First two years&quot;</span> =<span class="st"> </span><span class="dv">2</span>, <span class="st">&quot;Next three years&quot;</span> =<span class="st"> </span><span class="dv">3</span>),</a>
<a class="sourceLine" id="cb39-5" data-line-number="5">                   <span class="dt">line_sep =</span> <span class="dv">10</span>)</a></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-45">Table 5.12: </span>Average weekly number of cases of pertussis in west coast states for the last five years of reporting.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:10px;padding-right:10px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
First two years
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:10px;padding-right:10px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Next three years
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
</div>
<div id="group-rows" class="section level2">
<h2><span class="header-section-number">5.3</span> Group rows</h2>
<p>You might also want to show structure or grouping within your rows. There
are a number of functions in <code>kableExtra</code> that help with this.</p>
<p>These examples will again use data derived from the “us_contagious_diseases” data
from the <code>dslabs</code> package. The following code will load that data and then create the
<code>per_hepa_latest_years</code> dataframe from it:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="kw">library</span>(dslabs)</a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="kw">data</span>(<span class="st">&quot;us_contagious_diseases&quot;</span>)</a>
<a class="sourceLine" id="cb40-4" data-line-number="4"></a>
<a class="sourceLine" id="cb40-5" data-line-number="5">per_hepa_latest_years &lt;-<span class="st"> </span>us_contagious_diseases <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-6" data-line-number="6"><span class="st">  </span><span class="co"># Limit to states in the region of interest</span></a>
<a class="sourceLine" id="cb40-7" data-line-number="7"><span class="st">  </span><span class="kw">filter</span>(state <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;California&quot;</span>, <span class="st">&quot;Oregon&quot;</span>, <span class="st">&quot;Washington&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-8" data-line-number="8"><span class="st">  </span><span class="co"># Limit to the two diseases of interest</span></a>
<a class="sourceLine" id="cb40-9" data-line-number="9"><span class="st">  </span><span class="kw">filter</span>(disease <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Pertussis&quot;</span>, <span class="st">&quot;Hepatitis A&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-10" data-line-number="10"><span class="st">  </span><span class="co"># Limit to the latest five years reported for each combination of </span></a>
<a class="sourceLine" id="cb40-11" data-line-number="11"><span class="st">  </span><span class="co"># state and disease</span></a>
<a class="sourceLine" id="cb40-12" data-line-number="12"><span class="st">  </span><span class="kw">group_by</span>(state, disease) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-13" data-line-number="13"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(year)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-14" data-line-number="14"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-15" data-line-number="15"><span class="st">  </span><span class="co"># Calculate the average weekly count from the total yearly count and</span></a>
<a class="sourceLine" id="cb40-16" data-line-number="16"><span class="st">  </span><span class="co"># the number of weeks reporting (should check data---does an </span></a>
<a class="sourceLine" id="cb40-17" data-line-number="17"><span class="st">  </span><span class="co"># &#39;unreported&#39; week mean there were no cases that week?)</span></a>
<a class="sourceLine" id="cb40-18" data-line-number="18"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-19" data-line-number="19"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ave_weekly_count =</span> count <span class="op">/</span><span class="st"> </span>weeks_reporting) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-20" data-line-number="20"><span class="st">  </span><span class="co"># Limit to only the data to show in the table</span></a>
<a class="sourceLine" id="cb40-21" data-line-number="21"><span class="st">  </span><span class="kw">select</span>(state, disease, year, ave_weekly_count) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-22" data-line-number="22"><span class="st">  </span><span class="co"># Reorder by year so that the earliest year comes first</span></a>
<a class="sourceLine" id="cb40-23" data-line-number="23"><span class="st">  </span><span class="kw">arrange</span>(disease, state, year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-24" data-line-number="24"><span class="st">  </span><span class="co"># &quot;Widen&quot; the data for a nicer table</span></a>
<a class="sourceLine" id="cb40-25" data-line-number="25"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> year, <span class="dt">values_from =</span> ave_weekly_count)</a></code></pre></div>
<p>This dataframe gives the average weekly counts of
two diseases (separately) in three west coast states over the last five years of reporting. The
code used to create this dataset is an extension of the code used in the section on
adding top headings to tables—in this case, we’re adding on data for a second disease.</p>
<p>Here’s what the dataframe looks like:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">per_hepa_latest_years</a></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##   state      disease     `2007` `2008` `2009` `2010` `2011`
##   &lt;fct&gt;      &lt;fct&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 California Hepatitis A  6.12   6.48   4.60   4.10   3.59 
## 2 Oregon     Hepatitis A  0.612  0.596  0.422  0.413  0.277
## 3 Washington Hepatitis A  1.12   0.896  0.875  0.417  0.583
## 4 California Pertussis    3.28   7.08  10.4   26.4   23.4  
## 5 Oregon     Pertussis    2.04   1.61   3.15   3.26   3.60 
## 6 Washington Pertussis    5.98   9.08   6.3   11.7   15.2</code></pre>
<p>When we create a table from this, we may want to group the rows by disease (or by state),
so that readers can see common factors in certain rows.</p>
<p>You can create those groupings using the <code>pack_rows</code> function. You will include one
of these for each of the groupings that you want to create. For example, here there’s
one <code>pack_rows</code> to group the first three rows (all with measurements of Hepatitis A)
and a second <code>pack_rows</code> to group the fourth through six rows (all with measurements
of pertussis). For each <code>pack_rows</code> call, it gives the name that will be used for
the grouping (this is the name that shows up as a label for those groups in the
table) as well as the number of the line where the grouping should start (<code>start_row</code>)
and the line where it should end (<code>end_row</code>):</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">per_hepa_latest_years <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>disease) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb43-3" data-line-number="3"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb43-4" data-line-number="4"><span class="st">  </span><span class="kw">pack_rows</span>(<span class="st">&quot;Hepatitis A&quot;</span>, <span class="dt">start_row =</span> <span class="dv">1</span>, <span class="dt">end_row =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb43-5" data-line-number="5"><span class="st">  </span><span class="kw">pack_rows</span>(<span class="st">&quot;Pertussis&quot;</span>, <span class="dt">start_row =</span> <span class="dv">4</span>, <span class="dt">end_row =</span> <span class="dv">6</span>)</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
</tr>
</thead>
<tbody>
<tr grouplength="3">
<td colspan="6" style="border-bottom: 1px solid;">
<strong>Hepatitis A</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
California
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
6.5
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
4.1
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Oregon
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Washington
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
0.6
</td>
</tr>
<tr grouplength="3">
<td colspan="6" style="border-bottom: 1px solid;">
<strong>Pertussis</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
California
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
10.4
</td>
<td style="text-align:right;">
26.4
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Oregon
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
3.6
</td>
</tr>
<tr>
<td style="text-align:left; padding-left: 2em;" indentlevel="1">
Washington
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
15.2
</td>
</tr>
</tbody>
</table>
</div>
<div id="bold-columns-or-rows" class="section level2">
<h2><span class="header-section-number">5.4</span> Bold columns or rows</h2>
<p>When tables have a lot of content, you may want to highlight elements to draw attention to them. This example uses data from the <code>AmesHousing</code> package.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="kw">library</span>(AmesHousing)</a>
<a class="sourceLine" id="cb44-3" data-line-number="3"></a>
<a class="sourceLine" id="cb44-4" data-line-number="4">top_neighborhoods &lt;-<span class="st"> </span><span class="kw">make_ames</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(Year_Sold <span class="op">==</span><span class="st"> </span><span class="dv">2010</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-6" data-line-number="6"><span class="st">  </span><span class="kw">group_by</span>(Neighborhood) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-7" data-line-number="7"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">Home_Sales =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb44-8" data-line-number="8">            <span class="dt">Total =</span> scales<span class="op">::</span><span class="kw">dollar</span>(<span class="kw">sum</span>(Sale_Price))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-9" data-line-number="9"><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>Home_Sales) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-10" data-line-number="10"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>)</a></code></pre></div>
<p>The column_spec() function allows the selection of a column and then a specification for the look. For example, this is a <strong>bold</strong> treatment for the third column.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">top_neighborhoods <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-3" data-line-number="3"><span class="st">  </span><span class="kw">kable_styling</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-4" data-line-number="4"><span class="st">  </span><span class="kw">column_spec</span>(<span class="dv">3</span>, <span class="dt">bold =</span> T) </a></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Neighborhood
</th>
<th style="text-align:right;">
Home_Sales
</th>
<th style="text-align:left;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
North_Ames
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:left;font-weight: bold;">
$8,721,963
</td>
</tr>
<tr>
<td style="text-align:left;">
Old_Town
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:left;font-weight: bold;">
$3,556,339
</td>
</tr>
<tr>
<td style="text-align:left;">
Edwards
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;font-weight: bold;">
$2,835,421
</td>
</tr>
<tr>
<td style="text-align:left;">
Sawyer
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;font-weight: bold;">
$3,106,800
</td>
</tr>
<tr>
<td style="text-align:left;">
College_Creek
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;font-weight: bold;">
$4,163,850
</td>
</tr>
<tr>
<td style="text-align:left;">
Somerset
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;font-weight: bold;">
$4,334,126
</td>
</tr>
<tr>
<td style="text-align:left;">
Sawyer_West
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;font-weight: bold;">
$3,268,000
</td>
</tr>
<tr>
<td style="text-align:left;">
Mitchell
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;font-weight: bold;">
$3,043,600
</td>
</tr>
</tbody>
</table>
<p>The row_spec() function allows the selection of rows and a specification for a style.
For greater emphasis, this example sets a background fill color and the font color.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">top_neighborhoods <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="st">  </span><span class="kw">kable_styling</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-4" data-line-number="4"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">bold =</span> T, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">background =</span> <span class="st">&quot;#D7261E&quot;</span>)</a></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Neighborhood
</th>
<th style="text-align:right;">
Home_Sales
</th>
<th style="text-align:left;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
North_Ames
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:left;">
$8,721,963
</td>
</tr>
<tr>
<td style="text-align:left;">
Old_Town
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:left;">
$3,556,339
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: white !important;background-color: #D7261E !important;">
Edwards
</td>
<td style="text-align:right;font-weight: bold;color: white !important;background-color: #D7261E !important;">
23
</td>
<td style="text-align:left;font-weight: bold;color: white !important;background-color: #D7261E !important;">
$2,835,421
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: white !important;background-color: #D7261E !important;">
Sawyer
</td>
<td style="text-align:right;font-weight: bold;color: white !important;background-color: #D7261E !important;">
23
</td>
<td style="text-align:left;font-weight: bold;color: white !important;background-color: #D7261E !important;">
$3,106,800
</td>
</tr>
<tr>
<td style="text-align:left;">
College_Creek
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
$4,163,850
</td>
</tr>
<tr>
<td style="text-align:left;">
Somerset
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
$4,334,126
</td>
</tr>
<tr>
<td style="text-align:left;">
Sawyer_West
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
$3,268,000
</td>
</tr>
<tr>
<td style="text-align:left;">
Mitchell
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
$3,043,600
</td>
</tr>
</tbody>
</table>
</div>
<div id="dynamically-make-changes" class="section level2">
<h2><span class="header-section-number">5.5</span> Dynamically make changes</h2>
<p>You might want to make changes to your tables that depend on features of your data that aren’t known in advance or can’t be hardcoded.</p>
<p>Let’s look at the <code>comma_survey</code> data set, which polled Americans on the oxford comma and other grammatical concepts. In particular, we’ll look at the education of those who care about the debate of whether “data” is a singular or plural noun:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="kw">library</span>(fivethirtyeight)</a>
<a class="sourceLine" id="cb47-2" data-line-number="2"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb47-3" data-line-number="3"></a>
<a class="sourceLine" id="cb47-4" data-line-number="4">data_noun &lt;-<span class="st"> </span>comma_survey <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(care_data)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-6" data-line-number="6"><span class="st">  </span><span class="kw">select</span>(education, care_data)</a>
<a class="sourceLine" id="cb47-7" data-line-number="7"></a>
<a class="sourceLine" id="cb47-8" data-line-number="8">data_noun</a></code></pre></div>
<pre><code>## # A tibble: 1,091 x 2
##    education                        care_data 
##    &lt;ord&gt;                            &lt;ord&gt;     
##  1 Bachelor degree                  Not much  
##  2 Graduate degree                  Not much  
##  3 &lt;NA&gt;                             Not at all
##  4 Less than high school degree     Some      
##  5 &lt;NA&gt;                             Not much  
##  6 Some college or Associate degree Some      
##  7 Some college or Associate degree Some      
##  8 Some college or Associate degree A lot     
##  9 Graduate degree                  Not much  
## 10 Bachelor degree                  Some      
## # … with 1,081 more rows</code></pre>
<p>We want to make a table of what percent, by education, answered each of “Not much”, “Not at all”, “Some”, and “A lot” to the question: “How much, if at all, do you care about the debate over the use of the word”data&quot; as a singular or plural noun?&quot;.</p>
<p>First, we need to do some wrangling to replace <code>NA</code> values of <code>Education</code> with “Education unknown”, and to calculate the percent of each response.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="kw">library</span>(scales)</a>
<a class="sourceLine" id="cb49-2" data-line-number="2"></a>
<a class="sourceLine" id="cb49-3" data-line-number="3">data_noun_percent &lt;-<span class="st"> </span>data_noun <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">education =</span> <span class="kw">fct_explicit_na</span>(education, <span class="dt">na_level =</span> <span class="st">&quot;Education unknown&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-5" data-line-number="5"><span class="st">  </span><span class="kw">group_by</span>(education, care_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-6" data-line-number="6"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb49-8" data-line-number="8">    <span class="dt">prop =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n),</a>
<a class="sourceLine" id="cb49-9" data-line-number="9">    <span class="dt">percent =</span> <span class="kw">percent</span>(prop)</a>
<a class="sourceLine" id="cb49-10" data-line-number="10">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-11" data-line-number="11"><span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-12" data-line-number="12"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>n)</a>
<a class="sourceLine" id="cb49-13" data-line-number="13"></a>
<a class="sourceLine" id="cb49-14" data-line-number="14">data_noun_percent</a></code></pre></div>
<pre><code>## # A tibble: 24 x 4
##    education                        care_data    prop percent
##    &lt;ord&gt;                            &lt;ord&gt;       &lt;dbl&gt; &lt;chr&gt;  
##  1 Less than high school degree     Not at all 0.273  27.3%  
##  2 Less than high school degree     Not much   0.455  45.5%  
##  3 Less than high school degree     Some       0.182  18.2%  
##  4 Less than high school degree     A lot      0.0909 9.1%   
##  5 High school degree               Not at all 0.28   28.0%  
##  6 High school degree               Not much   0.34   34.0%  
##  7 High school degree               Some       0.3    30.0%  
##  8 High school degree               A lot      0.08   8.0%   
##  9 Some college or Associate degree Not at all 0.2    20.0%  
## 10 Some college or Associate degree Not much   0.403  40.3%  
## # … with 14 more rows</code></pre>
<p>Then reshape the data:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">data_noun_percent_wide &lt;-<span class="st"> </span>data_noun_percent <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>prop) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb51-3" data-line-number="3"><span class="st">  </span><span class="kw">pivot_wider</span>(</a>
<a class="sourceLine" id="cb51-4" data-line-number="4">    <span class="dt">names_from =</span> <span class="st">&quot;care_data&quot;</span>,</a>
<a class="sourceLine" id="cb51-5" data-line-number="5">    <span class="dt">values_from =</span> <span class="st">&quot;percent&quot;</span></a>
<a class="sourceLine" id="cb51-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb51-7" data-line-number="7"></a>
<a class="sourceLine" id="cb51-8" data-line-number="8">data_noun_percent_wide</a></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   education                        `Not at all` `Not much` Some   `A lot`
##   &lt;ord&gt;                            &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  
## 1 Less than high school degree     27.3%        45.5%      18.2%  9.1%   
## 2 High school degree               28.0%        34.0%      30.0%  8.0%   
## 3 Some college or Associate degree 20.0%        40.3%      29.8%  9.8%   
## 4 Bachelor degree                  18.90%       35.47%     35.76% 9.88%  
## 5 Graduate degree                  13.0%        37.3%      31.9%  17.8%  
## 6 Education unknown                18%          31%        32%    18%</code></pre>
<p>Then, we can make a table. We’ll clean up the column names, make sure the education column is left aligned and the responses are right aligned, and add a top header with the question “How much, if at all, do you care about the debate over the use of the word ‘data’ as a singular or plural noun?” above the “Not at all”, “Not much”, “Some”, and “A lot” columns:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">library</span>(kableExtra)</a>
<a class="sourceLine" id="cb53-2" data-line-number="2"></a>
<a class="sourceLine" id="cb53-3" data-line-number="3">data_noun_percent_wide <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb53-4" data-line-number="4"><span class="st">  </span><span class="kw">kable</span>(</a>
<a class="sourceLine" id="cb53-5" data-line-number="5">    <span class="dt">col.names =</span> <span class="kw">c</span>(<span class="st">&quot;Education&quot;</span>, <span class="st">&quot;Not at all&quot;</span>, <span class="st">&quot;Not much&quot;</span>, <span class="st">&quot;Some&quot;</span>, <span class="st">&quot;A lot&quot;</span>),</a>
<a class="sourceLine" id="cb53-6" data-line-number="6">    <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;lrrrr&quot;</span>)</a>
<a class="sourceLine" id="cb53-7" data-line-number="7">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb53-8" data-line-number="8"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> <span class="kw">c</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;How much, if at all, do you care about the debate over the use of the word &#39;data&#39; as a singular or plural noun?&quot;</span> =<span class="st"> </span><span class="dv">4</span>))</a></code></pre></div>
<table>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
How much, if at all, do you care about the debate over the use of the word ‘data’ as a singular or plural noun?
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Education
</th>
<th style="text-align:right;">
Not at all
</th>
<th style="text-align:right;">
Not much
</th>
<th style="text-align:right;">
Some
</th>
<th style="text-align:right;">
A lot
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Less than high school degree
</td>
<td style="text-align:right;">
27.3%
</td>
<td style="text-align:right;">
45.5%
</td>
<td style="text-align:right;">
18.2%
</td>
<td style="text-align:right;">
9.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
High school degree
</td>
<td style="text-align:right;">
28.0%
</td>
<td style="text-align:right;">
34.0%
</td>
<td style="text-align:right;">
30.0%
</td>
<td style="text-align:right;">
8.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
Some college or Associate degree
</td>
<td style="text-align:right;">
20.0%
</td>
<td style="text-align:right;">
40.3%
</td>
<td style="text-align:right;">
29.8%
</td>
<td style="text-align:right;">
9.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Bachelor degree
</td>
<td style="text-align:right;">
18.90%
</td>
<td style="text-align:right;">
35.47%
</td>
<td style="text-align:right;">
35.76%
</td>
<td style="text-align:right;">
9.88%
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduate degree
</td>
<td style="text-align:right;">
13.0%
</td>
<td style="text-align:right;">
37.3%
</td>
<td style="text-align:right;">
31.9%
</td>
<td style="text-align:right;">
17.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Education unknown
</td>
<td style="text-align:right;">
18%
</td>
<td style="text-align:right;">
31%
</td>
<td style="text-align:right;">
32%
</td>
<td style="text-align:right;">
18%
</td>
</tr>
</tbody>
</table>
<p>Doing this required us to hardcode in the question responses and the number of columns (4) corresponding to them (both for the header above, and for the column alignment). Our code is now fragile if this isn’t known in advance, or could change!</p>
<p>Instead, we can think about it this way: we know that the first column contains Education and the rest contain the answers. So, we can set the column names, alignment, and the header using attributes of <code>data_noun_percent_wide</code>.</p>
<p>For <code>col.names</code> and <code>align</code>, we can quickly use <code>names()</code> and <code>ncol()</code>, respectively:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">k &lt;-<span class="st"> </span>data_noun_percent_wide <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(</a>
<a class="sourceLine" id="cb54-3" data-line-number="3">    <span class="dt">col.names =</span> <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb54-4" data-line-number="4">      <span class="st">&quot;Education&quot;</span>,</a>
<a class="sourceLine" id="cb54-5" data-line-number="5">      <span class="kw">names</span>(data_noun_percent_wide)[<span class="op">-</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb54-6" data-line-number="6">    ),</a>
<a class="sourceLine" id="cb54-7" data-line-number="7">    <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(data_noun_percent_wide) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb54-8" data-line-number="8">  )</a>
<a class="sourceLine" id="cb54-9" data-line-number="9"></a>
<a class="sourceLine" id="cb54-10" data-line-number="10">k</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Education
</th>
<th style="text-align:right;">
Not at all
</th>
<th style="text-align:right;">
Not much
</th>
<th style="text-align:right;">
Some
</th>
<th style="text-align:right;">
A lot
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Less than high school degree
</td>
<td style="text-align:right;">
27.3%
</td>
<td style="text-align:right;">
45.5%
</td>
<td style="text-align:right;">
18.2%
</td>
<td style="text-align:right;">
9.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
High school degree
</td>
<td style="text-align:right;">
28.0%
</td>
<td style="text-align:right;">
34.0%
</td>
<td style="text-align:right;">
30.0%
</td>
<td style="text-align:right;">
8.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
Some college or Associate degree
</td>
<td style="text-align:right;">
20.0%
</td>
<td style="text-align:right;">
40.3%
</td>
<td style="text-align:right;">
29.8%
</td>
<td style="text-align:right;">
9.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Bachelor degree
</td>
<td style="text-align:right;">
18.90%
</td>
<td style="text-align:right;">
35.47%
</td>
<td style="text-align:right;">
35.76%
</td>
<td style="text-align:right;">
9.88%
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduate degree
</td>
<td style="text-align:right;">
13.0%
</td>
<td style="text-align:right;">
37.3%
</td>
<td style="text-align:right;">
31.9%
</td>
<td style="text-align:right;">
17.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Education unknown
</td>
<td style="text-align:right;">
18%
</td>
<td style="text-align:right;">
31%
</td>
<td style="text-align:right;">
32%
</td>
<td style="text-align:right;">
18%
</td>
</tr>
</tbody>
</table>
<p>And for the header, we can create a <em>named vector</em> with the number of columns each header spans (again, using <code>ncol()</code>):</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1">k_header &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="kw">ncol</span>(data_noun_percent_wide) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb55-2" data-line-number="2"><span class="kw">names</span>(k_header) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;How much, if at all, do you care about the debate over the use of the word &#39;data&#39; as a singular or plural noun?&quot;</span>)</a>
<a class="sourceLine" id="cb55-3" data-line-number="3"></a>
<a class="sourceLine" id="cb55-4" data-line-number="4">k <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb55-5" data-line-number="5"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> k_header)</a></code></pre></div>
<table>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
How much, if at all, do you care about the debate over the use of the word ‘data’ as a singular or plural noun?
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Education
</th>
<th style="text-align:right;">
Not at all
</th>
<th style="text-align:right;">
Not much
</th>
<th style="text-align:right;">
Some
</th>
<th style="text-align:right;">
A lot
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Less than high school degree
</td>
<td style="text-align:right;">
27.3%
</td>
<td style="text-align:right;">
45.5%
</td>
<td style="text-align:right;">
18.2%
</td>
<td style="text-align:right;">
9.1%
</td>
</tr>
<tr>
<td style="text-align:left;">
High school degree
</td>
<td style="text-align:right;">
28.0%
</td>
<td style="text-align:right;">
34.0%
</td>
<td style="text-align:right;">
30.0%
</td>
<td style="text-align:right;">
8.0%
</td>
</tr>
<tr>
<td style="text-align:left;">
Some college or Associate degree
</td>
<td style="text-align:right;">
20.0%
</td>
<td style="text-align:right;">
40.3%
</td>
<td style="text-align:right;">
29.8%
</td>
<td style="text-align:right;">
9.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Bachelor degree
</td>
<td style="text-align:right;">
18.90%
</td>
<td style="text-align:right;">
35.47%
</td>
<td style="text-align:right;">
35.76%
</td>
<td style="text-align:right;">
9.88%
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduate degree
</td>
<td style="text-align:right;">
13.0%
</td>
<td style="text-align:right;">
37.3%
</td>
<td style="text-align:right;">
31.9%
</td>
<td style="text-align:right;">
17.8%
</td>
</tr>
<tr>
<td style="text-align:left;">
Education unknown
</td>
<td style="text-align:right;">
18%
</td>
<td style="text-align:right;">
31%
</td>
<td style="text-align:right;">
32%
</td>
<td style="text-align:right;">
18%
</td>
</tr>
</tbody>
</table>
<p>Now our code is more robust and can easily adapt to changes in the data (e.g., if there were additional responses).</p>
<p>We might want to do other things, too, like bold the cell with the highest percent for each of the levels of Education.</p>
<p>To do this, we can use <code>cell_spec()</code> to set values of <code>percent</code> to bold if they are the highest value of <code>prop</code> (the unformatted <code>percent</code>) for their level of <code>education</code>.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">data_noun_bold_highest_prop &lt;-<span class="st"> </span>data_noun_percent <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(education) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">highest_prop =</span> <span class="kw">max</span>(prop)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb56-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">percent =</span> <span class="kw">cell_spec</span>(percent, <span class="dt">format =</span> <span class="st">&quot;html&quot;</span>, <span class="dt">bold =</span> prop <span class="op">==</span><span class="st"> </span>highest_prop))</a>
<a class="sourceLine" id="cb56-5" data-line-number="5"></a>
<a class="sourceLine" id="cb56-6" data-line-number="6">data_noun_bold_highest_prop</a></code></pre></div>
<pre><code>## # A tibble: 24 x 5
## # Groups:   education [6]
##    education           care_data   prop percent                     highest_prop
##    &lt;ord&gt;               &lt;ord&gt;      &lt;dbl&gt; &lt;chr&gt;                              &lt;dbl&gt;
##  1 Less than high sch… Not at a… 0.273  &quot;&lt;span style=\&quot;     \&quot; &gt;27…        0.455
##  2 Less than high sch… Not much  0.455  &quot;&lt;span style=\&quot; font-weigh…        0.455
##  3 Less than high sch… Some      0.182  &quot;&lt;span style=\&quot;     \&quot; &gt;18…        0.455
##  4 Less than high sch… A lot     0.0909 &quot;&lt;span style=\&quot;     \&quot; &gt;9.…        0.455
##  5 High school degree  Not at a… 0.28   &quot;&lt;span style=\&quot;     \&quot; &gt;28…        0.34 
##  6 High school degree  Not much  0.34   &quot;&lt;span style=\&quot; font-weigh…        0.34 
##  7 High school degree  Some      0.3    &quot;&lt;span style=\&quot;     \&quot; &gt;30…        0.34 
##  8 High school degree  A lot     0.08   &quot;&lt;span style=\&quot;     \&quot; &gt;8.…        0.34 
##  9 Some college or As… Not at a… 0.2    &quot;&lt;span style=\&quot;     \&quot; &gt;20…        0.403
## 10 Some college or As… Not much  0.403  &quot;&lt;span style=\&quot; font-weigh…        0.403
## # … with 14 more rows</code></pre>
<p>This applies HTML formatting to <code>percent</code> (specifically, bold formatting to the highest value for each level of <code>education</code>) that will be picked up by kableExtra.</p>
<p>Then, we again reshape the data to a wide format and create a table. This time, we need to set <code>escape = FALSE</code> in <code>kable()</code> to let it know that there is HTML in the cells that should <em>not</em> be escaped (i.e., not treated as regular text):</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1">data_noun_bold_highest_prop_wide &lt;-<span class="st"> </span>data_noun_bold_highest_prop <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>prop, <span class="op">-</span>highest_prop) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-3" data-line-number="3"><span class="st">  </span><span class="kw">pivot_wider</span>(</a>
<a class="sourceLine" id="cb58-4" data-line-number="4">    <span class="dt">names_from =</span> <span class="st">&quot;care_data&quot;</span>,</a>
<a class="sourceLine" id="cb58-5" data-line-number="5">    <span class="dt">values_from =</span> <span class="st">&quot;percent&quot;</span></a>
<a class="sourceLine" id="cb58-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb58-7" data-line-number="7"></a>
<a class="sourceLine" id="cb58-8" data-line-number="8">k_header &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="kw">ncol</span>(data_noun_bold_highest_prop_wide) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb58-9" data-line-number="9"><span class="kw">names</span>(k_header) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;How much, if at all, do you care about the debate over the use of the word &#39;data&#39; as a singular or plural noun?&quot;</span>)</a>
<a class="sourceLine" id="cb58-10" data-line-number="10"></a>
<a class="sourceLine" id="cb58-11" data-line-number="11">data_noun_bold_highest_prop_wide <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-12" data-line-number="12"><span class="st">  </span><span class="kw">kable</span>(<span class="st">&quot;html&quot;</span>,</a>
<a class="sourceLine" id="cb58-13" data-line-number="13">        <span class="dt">col.names =</span> <span class="kw">c</span>(<span class="st">&quot;Education&quot;</span>, <span class="kw">names</span>(data_noun_bold_highest_prop_wide)[<span class="op">-</span><span class="dv">1</span>]),</a>
<a class="sourceLine" id="cb58-14" data-line-number="14">        <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(data_noun_bold_highest_prop_wide) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)),</a>
<a class="sourceLine" id="cb58-15" data-line-number="15">        <span class="dt">escape =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb58-16" data-line-number="16">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-17" data-line-number="17"><span class="st">  </span><span class="kw">add_header_above</span>(<span class="dt">header =</span> k_header)</a></code></pre></div>
<table>
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
How much, if at all, do you care about the debate over the use of the word ‘data’ as a singular or plural noun?
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Education
</th>
<th style="text-align:right;">
Not at all
</th>
<th style="text-align:right;">
Not much
</th>
<th style="text-align:right;">
Some
</th>
<th style="text-align:right;">
A lot
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Less than high school degree
</td>
<td style="text-align:right;">
<span style="     ">27.3%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">45.5%</span>
</td>
<td style="text-align:right;">
<span style="     ">18.2%</span>
</td>
<td style="text-align:right;">
<span style="     ">9.1%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
High school degree
</td>
<td style="text-align:right;">
<span style="     ">28.0%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">34.0%</span>
</td>
<td style="text-align:right;">
<span style="     ">30.0%</span>
</td>
<td style="text-align:right;">
<span style="     ">8.0%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Some college or Associate degree
</td>
<td style="text-align:right;">
<span style="     ">20.0%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">40.3%</span>
</td>
<td style="text-align:right;">
<span style="     ">29.8%</span>
</td>
<td style="text-align:right;">
<span style="     ">9.8%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Bachelor degree
</td>
<td style="text-align:right;">
<span style="     ">18.90%</span>
</td>
<td style="text-align:right;">
<span style="     ">35.47%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">35.76%</span>
</td>
<td style="text-align:right;">
<span style="     ">9.88%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Graduate degree
</td>
<td style="text-align:right;">
<span style="     ">13.0%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">37.3%</span>
</td>
<td style="text-align:right;">
<span style="     ">31.9%</span>
</td>
<td style="text-align:right;">
<span style="     ">17.8%</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Education unknown
</td>
<td style="text-align:right;">
<span style="     ">18%</span>
</td>
<td style="text-align:right;">
<span style="     ">31%</span>
</td>
<td style="text-align:right;">
<span style=" font-weight: bold;    ">32%</span>
</td>
<td style="text-align:right;">
<span style="     ">18%</span>
</td>
</tr>
</tbody>
</table>
<p>This way, we can apply formatting based on specific values of the data, which may change.</p>
</div>
<div id="take-advantage-of-pdf-only-features" class="section level2">
<h2><span class="header-section-number">5.6</span> Take advantage of PDF-only features</h2>
<p>Example code that will allow us to embed PDF-only table output. This
uses a couple of basic examples of doing this, with code from the <code>dslabs</code> package.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb59-2" data-line-number="2"><span class="kw">library</span>(dslabs)</a>
<a class="sourceLine" id="cb59-3" data-line-number="3"><span class="kw">data</span>(<span class="st">&quot;us_contagious_diseases&quot;</span>)</a>
<a class="sourceLine" id="cb59-4" data-line-number="4">top_<span class="dv">10</span>_data &lt;-<span class="st"> </span>us_contagious_diseases <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(disease <span class="op">==</span><span class="st"> &quot;Pertussis&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-6" data-line-number="6"><span class="st">  </span><span class="kw">group_by</span>(state) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-7" data-line-number="7"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total_count =</span> <span class="kw">sum</span>(count)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-8" data-line-number="8"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(total_count)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-9" data-line-number="9"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) </a></code></pre></div>
<p>Then, you can use the <code>kable</code> function to create a basic PDF table:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">top_<span class="dv">10</span>_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb60-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">format =</span> <span class="st">&quot;latex&quot;</span>) </a></code></pre></div>
<p>The <code>booktabs = TRUE</code> option, if you include it in the <code>kable</code> function call, will give
some cleaner default formatting for the table:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1">top_<span class="dv">10</span>_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb61-2" data-line-number="2"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">format =</span> <span class="st">&quot;latex&quot;</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>) </a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tidyverse-kableextra-pipelines.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="wild-caught-tables.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["kableExtra-cookbook.pdf", "kableExtra-cookbook.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
